pipeline {
  agent {label 'node-slave'} 
    stages {
      stage ('checkout') {
        steps {
          sh 'ls'
          sh 'pwd'
        }
      }
       stage ('build') {
        steps {
          sh 'echo "Building "'
          sh 'mvn clean package'
        }          
       } 
       stage ('push war file to jfrog artifactory') {
        steps {
          sh '''
            echo "
                <servers>
                  <server>
                      <id>hello-world-new-war</id>
                      <username>admin</username>
                      <password>cmVmdGtuOjAxOjE3NzAzNjg2NDM6S3dYUmc3MmFtZXVMRUhRSTN4THVIQ3E3Zldm</password>
                  </server>
              </servers>
                  " >> .m2/settings.xml
              '''
          sh 'mvn deploy'
        }
       }
    }
  }

