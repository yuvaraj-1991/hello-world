pipeline {
  agent {label 'node-slave'} 
    stages {
      stage ('checkout') {
        steps {
          sh 'ls'
          sh 'pwd'
        }
      }
       stage ('build') {
        steps {
          sh 'echo "Building "'
          sh 'mvn clean package'
        }          
       } 
       stage ('push war file to jfrog artifactory') {
        steps {
          sh ''' 
           echo '
              <settings>
                <servers>
                  <server>
                      <id>new-hello-world-war-libs-release</id>
                      <username>admin</username>
                      <password>cmVmdGtuOjAxOjE3NzAzNjk2MjA6ejIxY0VGRFhZT0JIZWFZRTEwd3hNd3g0NUlj</password>
                  </server>
                </servers>
              </settings> '
                   >> ~/.m2/settings.xml
              '''
          sh 'mvn deploy'
        }
       }
    }
  }

